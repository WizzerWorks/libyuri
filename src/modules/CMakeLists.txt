add_subdirectory(anaglyph)
add_subdirectory(blank)
add_subdirectory(crop)
add_subdirectory(dummy)
add_subdirectory(dup)
add_subdirectory(filedump)
add_subdirectory(flip)
add_subdirectory(null)
add_subdirectory(rawfilesource)
add_subdirectory(split)
add_subdirectory(simplerenderer)


find_package(JPEG)
find_package(PNG)
find_package(CURL)
find_package(CUDA)
CHECK_INCLUDE_FILES (linux/videodev2.h HAVE_VIDEODEV2_H)
#pkg_check_modules(libavcodec libavcodec) #Already checked by core
pkg_check_modules(libavformat libavformat) 
pkg_check_modules(libavutil libavutil)
pkg_check_modules(libswscale libswscale)

IF(JPEG_FOUND)
	add_subdirectory(jpegdecoder)
	add_subdirectory(jpegencoder)
ENDIF()

IF(HAVE_VIDEODEV2_H)
	add_subdirectory(v4l2)
ENDIF()

IF(PNG_FOUND)
	add_subdirectory(pngencoder)
ENDIF()

IF(CURL_FOUND)
	add_subdirectory(fetcher)
ENDIF()

IF(CORE_LIBAV)
	IF (${libavutil_FOUND})
		add_subdirectory(avencoder)
	ENDIF()
	IF (${libavformat_FOUND})
		add_subdirectory(tsmuxer)
	ENDIF()
	IF (${libswscale_FOUND})
		add_subdirectory(avscaler)
		add_subdirectory(avdecoder)
	ENDIF()
ENDIF()

IF(${CORE_CUDA})
	add_subdirectory(yuriconvert)
ENDIF()